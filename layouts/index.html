{{ define "main" }}

  {{/* ========== Featured Projects ========== */}}
  {{ $projects := where .Site.RegularPages "Section" "projects" }}
  {{ $projects = where $projects "Params.featured" true }}
  {{ $projects = where $projects "Params.hidden" "ne" true }}

  {{ if gt (len $projects) 0 }}
    <section class="article-group mb-10">
      <h2 class="text-2xl font-bold mb-2 flex items-center gap-2">
        Featured Projects
      </h2>
      <p class="text-gray-500 mb-4">Personal work across physics, math, and performance-sensitive programming.</p>
      <div class="article-list">
        {{ range $projects }}
          {{ partial "article-list/default" . }}
        {{ end }}
      </div>
    </section>
  {{ end }}

  {{/* ---------- Divider ---------- */}}
    <hr class="my-8 border-t-2 border-gray-300 opacity-30 w-1/2 mx-auto">

  {{/* ========== Featured Blog Posts ========== */}}
  {{ $posts := where .Site.RegularPages "Section" "blog" }}
  {{ $posts = where $posts "Params.featured" true }}
  {{ $posts = where $posts "Params.hidden" "ne" true }}

  {{ if gt (len $posts) 0 }}
    <section class="article-group mt-10">
      <h2 class="text-2xl font-bold mb-2 flex items-center gap-2">
        Featured Posts
      </h2>
      <p class="text-gray-500 mb-4">Thoughts and reflections, as I figure things out.</p>
      <div class="article-list">
        {{ range $posts }}
          {{ partial "article-list/default" . }}
        {{ end }}
      </div>
    </section>
  {{ end }}

  {{ partial "footer/footer" . }}

{{ end }}

{{ define "right-sidebar" }}
  {{ partial "sidebar/right.html" (dict "Context" . "Scope" "homepage") }}
{{ end }}
